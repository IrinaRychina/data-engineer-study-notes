> source https://halltape.github.io/HalltapeRoadmapDE/QUESTION/DWH/

* Что такое денормализованная таблица?
это таблица, структура которой приведена в состояние не соответствующее критериям нормализации.
это намеренное нарушение норм нормализации для минимизации издержек пуем избегания join.

* Для чего нужна нормализация таблиц?
для устранения аномалий вставки, удаления и обновления и удаления избыточности данных.
1 нф - атомарность значений и не должно быть повторяющихся строк
2 нф - таблица в 1 нф, есть первичный ключ и все атрибуты зависят целиком от первичного ключа, а не от какой-то его части (worker_id project_id - первичный ключ, worker_name зависит только от worker_id, project_name только от project_id).
3 нф - таблица в 2 нф и все атрибуты зависят только от первичного ключа, а не от других артибутов (product_id, supplier_id, supplier_phone - зависит не от первичного ключа, а от атрибута supplier_id).

* Какие подходы построения хранилищ данных бывают?
по Кимбаллу, по Иномону, data vault, anchor modeling.

* Что такое OLTP и OLAP? Чем они отличаются? Приведи соответствущие примеры баз данных
Два подхода, которые имеют разный характер нагрузки на систему.
oltp - online transaction processing, маленькие короткие транзакции, rps (requests per second), максимальная нормализация, добавление/удаления/изменение в любое время.
olap - online analytical proccesing, нестандартные запросы, контролируемая избыточность, периодическое добавление данных, хранит исторические данные

* Объясни подход Кимбалла?
проектирование dwh снизу вверх, то есть анализ потребностей пользователей и создание отчетов под эти потребности.
Такое хранилище можно назвать коллекцией витрин данных.
Быстрый результат, но высокая стоимость поддержки новых источников и отсутствие стандартизации.

* Объясни подход Инмона?
проектирование сверху вниз, то есть анализ бизнеса в целом, определние бизнес сущностей, определение их атрибутов и связей между ними.
Долгая реализация, сложность в проектировании.
Отсуствие противоречивости в данных, легкость поддержки при увеличении количества источников.

* Объясни подход Data Vault 2.0? Чем отличается 1 и 2 версия DV?
более современный подход к проектированию dwh, уменьшает трудоемкость развития хд за счет гибкости архитектуры хд.
в модели Кимбалла каждая следующая витрина использует те же источники данных, что и были, так как отсутствует центральный слой.
модель Инмона неустойчива к изменениям в бизнесе, тогда придется перестраивать структуру таблиц.

Методололгия вводит 3 вида таблиц:
хаб хранит сущность, 
линк хранит связи между сущностями, 
саттелит - хранит атрибуты сущности.

с версии 2 добавлены:
bridge - содержит в себе линки одной сущности, чтобы облегчить соединение данных через несколько связей.
pit - помогает получить информацию об одной сущности, учитывая что в сателитах атрибуты этой сущности могут иметь разную частоту обновления.  
predefined derevations - готовые предагрегированные или предрассчитанные данные.

также в версии dv 2 центральный слой делится на
raw data vault - данные такие какими они были в источниках при этом одна и та же сущность например пользователь может иметь разные идентификаторы,
business data vault - когда сущности из разных источников объединяются в одну сущность с одним идентификатором.

еще одно отличие версии 2 - параллельность загрузки хабов, линков и сателитов (в версии 1 сначала загружаются забы, генерируются суррогатные ключи и затем можно создать линки и сателиты)


* Объясни подход Anchor Modeling?
это технология моделирования гибкой базы данных, подходящая для информации, которая со временем изменяется как по структуре, так и по содержанию.
В методике моделирования используются четыре модели моделирования: якорь, атрибут, связь и узел, каждый из которых отражает различные аспекты моделируемого домена.

* Чем отличаются Data Vault и Anchor Modeling?
в обеих методологиях повышается градус нормализации данных выше 3 нормальной формы, уменьшается постоянное дублирование данных в scd2 и позволяет быстро дорабатывать хранилище.

можно сказать, что якорная модель - это теоретически крайняя форма data vault.
Если сравнить hub и anchor, то в якоре нет бизнес ключа, в якоре бизнес ключи расределяются как обычные атрибуты.
В data vault атрибуты группируются в сателиты по разным признакам, их можно объединить по источнику, по частоте изменений.
В anchor каждый атрибут - одна таблица без группировки, проще на этапе проектирования, но количество таблиц растет быстро.
Для управления хранилища в якорной модели нужна автоматизации, иначе почти невозможно эффективно управлять большим количеством таблиц. 

* Что такое SCD и какие типы бывают?
это механизм отслеживания изменений в атрибутах измерений в хранилище данных.
существует scd от 0 до 6.
0 - данные после попадания в таблицу больше не изменяются.
1 - не храним историю, старое значение перезаписывается новым. Простая структура, нет избыточности, но не хранится история.
2 - история даннх хранится, актуальные данные записываются как новая строка и помечаются временем когда эти данные актуальны. Есть история, но добавляется избыточноть данных.
3 - в самой записи добавляются столбцы, которые обозначают старое и новое значение. Меньше избыточночть, но ограниченная история.
4- все исторические данные хранятся в отдельной таблице, а основная таблица всегда хранит актуальные данные. Недостаток в том, что одна сущность делится на 2 таблицы
6 - комбинация scd1, scd2 и scd3.

* На какие слои делится ХД? И для чего они нужны?
первичный слой (primary, staging, raw) - данные загружаются из источников, этот слой абстрагирует следующие слои хранилища от физического устройства источников данных.
core layer, центральный слой - консолидация данных из разных источников, приводится к единой структуре.
data mart layer, слой витрин данных - слой где данные преобразуются в структуры удобные для анализа и использования в bi системах.
срез данных, направленный например на работников одного департамента.

* Что представляет из себя ER-модели, какие связи могут быть?
это схема сущность-связь, разновидность блок схемы, в которой показано как связаны сущности внтури хд.
Один ко многим, многие ко многим, один к одному.

* Как заменяется связь "многие-ко-многим"?
Связь "многие-ко-многим" заменяется путем создания промежуточной таблицы (таблицы-связи), которая содержит внешние ключи от обеих исходных таблиц.
Эта новая таблица позволяет установить две связи "один-ко-многим" между исходными таблицами и промежуточной таблицей, что является стандартным подходом для реляционных баз данных

* Что такое Data Lake? и чем оно отличается от DWH?
это хранилище неструктурированных данных, в отличие от DWH в него поступают данные без предварительной очистки и подготовки.
например, записи с камер наружного наблюдения, логи пользовательского поведения.
такие данные пока не пригодны для использования в bi системах, но могут быть использованы для быстрой проверки гипотез с помощью ml алгоритмов.
Масштабируемость, быстрота запуска, высокая гибкость добавления новых структур данных.
Может превратиться в болото данных из-за отсутствия контроля при загрузке данных и неправильного определения какие данные важны, а какие нет.

* Что такое потоковая обработка данных и пакетная обработка данных?
Процесс загрузки данных в хранилище - это etl, extract, transform, load.
потоковая обработка данных - это обработка коротких транзакций в режиме реального времени, создает равномерную нагрузку на железо, показывает резултат в режиме реального времени,
относительно сложная разработка и тестирование, низкая эффективность для olap систем.
пакетная обработка данных - обработка данных пачками, данные доставляются с задержкой, создает пиковую нагрузку на железо, высокая эффективность для olap систем.

* что такое lambda-архитектура, в чем ее минусы?
сочетание потоковой и пакетной обработки, минус в том что может быть дублирование логики для поддержки двух типов обработки.

* что такое kappa архитектура?
только потоковая обработка

* что такое data mesh?
это подход использования микросервисной архитектуры в хд.

* Что такое и чем отличаются Концептуальная, Логическая и Физическая модели?
* Чем в хранилище ODS слой отличается от DDS слоя?
